# Adventure Works SQL Project

Adventure Works is a fictional company often used as a sample relational database.

In this project, there were two main challenges. First, preparing the database for an upcoming auction. Secondly, finding the ideal locations for two physical stores in the United States.

During the first challenge, the aim was to establish a schema that adheres to all auction regulations, ensuring smooth stock clearance operations.

The second challenge involved selecting the store locations without factoring in the top 30 customer cities.

Throughout the problem-solving process, adjustments to the Adventure Works database were necessary. This included modifications to database schemas, creation of new tables, and implementation of suggested procedures to address the business challenges.

More information and details be found below.
Let me know if you have any questions!


## Auction Database Overview

To streamline the auction process, the database has been structured with three key tables:

1. **AuctionProducts:**
   - This table contains details of products enlisted for auction. It includes fields such as ProductID, ProductName, InitialBidPrice, AuctionStartDate, AuctionEndDate, InAuction, and Sold. The columns InAuction and Sold utilize a binary classification (1 for True, 0 for False). For instance, a product marked with 1 in the InAuction column indicates an active auction allowing bids. Similarly, if a product is marked with 1 in the Sold column, it signifies that the product has been sold at the MaxBidAmount (the product's listed price). Once sold, the InAuction column automatically switches to 0. If a product has 0 in the InAuction column, it may or may not be sold (marked with 0 in the Sold column), allowing for its removal from the auction. Every product added to this table is assumed to be eligible for auction.

2. **AuctionBids:**
   - This table records all bids made during the auction. It includes fields such as BidID, ProductID, CustomerID, BidAmount, and BidTimestamp, providing comprehensive information about each bid.

3. **TresholdConfig:**
   - This table configures dynamic information subject to management requirements. Alongside ProductID, it includes fields such as BidIncrementAmount (set at 0.05 for each product), MaxBidAmount (equivalent to the product's listed price), and InitialBidPrice (varies between 50% or 75% of the listed price).

In addition to these tables, five procedures have been developed to manage auction-related tasks:

1. **uspAddProductToAuction:**
   - This procedure outlines the conditions for selecting products to be included in the auction and adds them to the AuctionProducts table. It includes conditions such as product eligibility, avoiding duplicates in ongoing auctions, and setting initial bid prices within specified limits.

2. **uspTryBidProduct:**
   - This procedure allows customers to place bids on products currently in auction. It includes conditions for validating bid amounts, ensuring increments, and updating auction statuses upon successful bids.

3. **uspRemoveProductFromAuction:**
   - This procedure removes a product from the auction, updating its status in the AuctionProducts table.

4. **uspListBidsOffersHistory:**
   - This procedure retrieves the bid history of a specific customer within a given time period. It includes an option to filter active auctions and consider bids made on products that have been removed from auction.

5. **uspUpdateProductAuctionStatus:**
   - This procedure updates the auction status for all products based on the auction end date, changing the InAuction column to 0 when the auction concludes.

These tables and procedures collectively facilitate efficient management and execution of the auction process within the database.

## Store Selection

1. A table was created with the following columns: “CustomerID”, “PersonType”, “TotalOrderAmount”, “City", and “CountryRegionCode”;
   
3. The “CustomerID” was obtained from the “Sales.Customer” table;
   
5. The “PersonType” was obtained from the “Person.Person” table, classifying customers with 'SC' as 'Stores' and the remaining ones as 'Individual';
   
7. The “TotalOrderAmount” was calculated as the sum of “TotalDue” from customers in the “Sales.SalesOrderHeader” table, measuring the total revenue generated by each customer;
   
9. The “City” was obtained from the “Person.Address” table;
    
11. The “CountryRegionCode” was obtained from the “Person.StateProvince” table;
    
13. A view called “CustomerSales” was created to select the two cities with the highest volume of sales to individual customers located in the United States, excluding:
    
    - The 30 cities in the United States where the best 30 store customers are located;
  
    - The 30 cities in the United States with the highest volume of sales to store customers. This restriction was added to avoid selecting a city where, although one of our 30 best store customers may not exist, there are several store customers who together have a high sales volume. The assumption is that the greatest gain for the company lies in having physical stores where they have more individual customers. This way, the company will at least maintain the same revenues, given that those individuals can now buy directly from the store, but it might create the opportunity to increase the revenue generated by these customers and attract new ones. On the other hand, if we hadn’t excluded the condition mentioned, we would be cannibalizing revenue coming from clients’ stores, something that management doesn’t want to do.

Based on this approach the locations suggested to open two new stores are Bellflower and Burbank.
